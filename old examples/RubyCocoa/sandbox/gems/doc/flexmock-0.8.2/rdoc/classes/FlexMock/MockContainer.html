<?xml version="1.0" encoding="iso-8859-1"?>
<!--
 ! Excerpted from "RubyCocoa",
 ! published by The Pragmatic Bookshelf.
 ! Copyrights apply to this code. It may not be used to create training material, 
 ! courses, books, articles, and the like. Contact us if you are in doubt.
 ! We make no guarantees that this code is fit for any purpose. 
 ! Visit http://www.pragmaticprogrammer.com/titles/bmrc for more book information.
-->
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Module: FlexMock::MockContainer</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Module</strong></td>
          <td class="class-name-in-header">FlexMock::MockContainer</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../files/lib/flexmock/mock_container_rb.html">
                lib/flexmock/mock_container.rb
                </a>
        <br />
                <a href="../../files/lib/flexmock/rails/view_mocking_rb.html">
                lib/flexmock/rails/view_mocking.rb
                </a>
        <br />
            </td>
        </tr>

        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
###################################################################### Mock
container methods
</p>
<p>
Include this module in to get integration with <a
href="../FlexMock.html">FlexMock</a>. When this module is included, mocks
may be created with a simple call to the <tt><a
href="MockContainer.html#M000019">flexmock</a></tt> method. Mocks created
with via the method call will automatically be verified in the teardown of
the test case.
</p>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000019">flexmock</a>&nbsp;&nbsp;
      <a href="#M000018">flexmock_close</a>&nbsp;&nbsp;
      <a href="#M000021">flexmock_remember</a>&nbsp;&nbsp;
      <a href="#M000016">flexmock_teardown</a>&nbsp;&nbsp;
      <a href="#M000017">flexmock_verify</a>&nbsp;&nbsp;
      <a href="#M000020">flexstub</a>&nbsp;&nbsp;
      <a href="#M000022">rails_version</a>&nbsp;&nbsp;
      <a href="#M000023">should_render_view</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->
    <div id="includes">
      <h3 class="section-bar">Included Modules</h3>

      <div id="includes-list">
        <span class="include-name"><a href="Ordering.html">Ordering</a></span>
      </div>
    </div>

    <div id="section">





      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000019" class="method-detail">
        <a name="M000019"></a>

        <div class="method-heading">
          <a href="MockContainer.src/M000019.html" target="Code" class="method-signature"
            onclick="popupCode('MockContainer.src/M000019.html');return false;">
          <span class="method-name">flexmock() { |mock| ... }<br />
flexmock(name) { |mock| ... }<br />
flexmock(expect_hash) { |mock| ... }<br />
flexmock(name, expect_hash) { |mock| ... }<br />
flexmock(real_object) { |mock| ... }<br />
flexmock(real_object, name) { |mock| ... }<br />
flexmock(real_object, name, expect_hash) { |mock| ... }<br />
flexmock(:base, string, name, expect_hash) { |mock| ... }<br />
</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Create a mocking object in the <a href="../FlexMock.html">FlexMock</a>
framework. The <tt><a href="MockContainer.html#M000019">flexmock</a></tt>
method has a number of options available, depending on just what kind of
mocking object your require. Mocks created via <tt><a
href="MockContainer.html#M000019">flexmock</a></tt> will be automatically
verify during the teardown phase of your test framework.
</p>
<p>
<b>Note:</b> A plain <a href="MockContainer.html#M000019">flexmock</a>()
call without a block will return the mock object (the object that
interprets <tt>should_receive</tt> and its brethern). A <a
href="MockContainer.html#M000019">flexmock</a>() call that
<em>includes</em> a block will return the domain objects (the object that
will interpret domain messages) since the mock will be passed to the block
for configuration. With regular mocks, this distinction is unimportant
because the mock object and the domain object are the same object. However,
with partial mocks, the mock object is separation from the domain object.
Keep that distinciton in mind.
</p>
<table>
<tr><td valign="top">name :</td><td>Name of the mock object. If no name is given, &quot;unknown&quot; is used
for full mocks and &quot;<a
href="MockContainer.html#M000019">flexmock</a>(<em>real_object</em>)&quot;
is used for partial mocks.

</td></tr>
<tr><td valign="top">expect_hash :</td><td>Hash table of method names and values. Each method/value pair is used to
setup a simple expectation so that if the mock object receives a message
matching an entry in the table, it returns the associated value. No
argument our call count constraints are added. Using an expect_hash is
identical to calling:

<pre>
    mock.should_receive(method_name).and_return(value)
</pre>
<p>
for each of the method/value pairs in the hash.
</p>
</td></tr>
<tr><td valign="top">real_object :</td><td>If a real object is given, then a partial mock is constructed using the
real_object as a base. Partial mocks (formally referred to as stubs) behave
as a mock object when an expectation is matched, and otherwise will behave
like the original object. This is useful when you want to use a real object
for testing, but need to mock out just one or two methods.

</td></tr>
<tr><td valign="top">:base :</td><td>Forces the following argument to be used as the base of a partial mock
object. This explicit tag is only needed if you want to use a string or a
symbol as the mock base (string and symbols would normally be interpretted
as the mock name).

</td></tr>
<tr><td valign="top">&amp;block :</td><td>If a block is given, then the mock object is passed to the block and
expectations may be configured within the block. When a block is given for
a partial mock, <a href="MockContainer.html#M000019">flexmock</a> will
return the domain object rather than the mock object.

</td></tr>
</table>
        </div>
      </div>

      <div id="method-M000018" class="method-detail">
        <a name="M000018"></a>

        <div class="method-heading">
          <a href="MockContainer.src/M000018.html" target="Code" class="method-signature"
            onclick="popupCode('MockContainer.src/M000018.html');return false;">
          <span class="method-name">flexmock_close</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Close all the mock objects in the container. Closing a mock object restores
any original behavior that was displaced by the mock.
</p>
        </div>
      </div>

      <div id="method-M000021" class="method-detail">
        <a name="M000021"></a>

        <div class="method-heading">
          <a href="MockContainer.src/M000021.html" target="Code" class="method-signature"
            onclick="popupCode('MockContainer.src/M000021.html');return false;">
          <span class="method-name">flexmock_remember</span><span class="method-args">(mocking_object)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Remember the mock object / stub in the mock container.
</p>
        </div>
      </div>

      <div id="method-M000016" class="method-detail">
        <a name="M000016"></a>

        <div class="method-heading">
          <a href="MockContainer.src/M000016.html" target="Code" class="method-signature"
            onclick="popupCode('MockContainer.src/M000016.html');return false;">
          <span class="method-name">flexmock_teardown</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Do the <a href="MockContainer.html#M000019">flexmock</a> specific teardown
stuff. If you need finer control, you can use either <tt><a
href="MockContainer.html#M000017">flexmock_verify</a></tt> or <tt><a
href="MockContainer.html#M000018">flexmock_close</a></tt>.
</p>
        </div>
      </div>

      <div id="method-M000017" class="method-detail">
        <a name="M000017"></a>

        <div class="method-heading">
          <a href="MockContainer.src/M000017.html" target="Code" class="method-signature"
            onclick="popupCode('MockContainer.src/M000017.html');return false;">
          <span class="method-name">flexmock_verify</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Perform verification on all mocks in the container.
</p>
        </div>
      </div>

      <div id="method-M000020" class="method-detail">
        <a name="M000020"></a>

        <div class="method-heading">
          <span class="method-name">flexstub</span><span class="method-args">(*args)</span>
        </div>
      
        <div class="method-description">
          <p>
Alias for <a href="MockContainer.html#M000019">flexmock</a>
</p>
        </div>
      </div>

      <div id="method-M000022" class="method-detail">
        <a name="M000022"></a>

        <div class="method-heading">
          <a href="MockContainer.src/M000022.html" target="Code" class="method-signature"
            onclick="popupCode('MockContainer.src/M000022.html');return false;">
          <span class="method-name">rails_version</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000023" class="method-detail">
        <a name="M000023"></a>

        <div class="method-heading">
          <a href="MockContainer.src/M000023.html" target="Code" class="method-signature"
            onclick="popupCode('MockContainer.src/M000023.html');return false;">
          <span class="method-name">should_render_view</span><span class="method-args">(template_name=nil)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Declare that the Rails controller under test should render the named view.
If a view template name is given, it will be an error if the named view is
not rendered during the execution of the contoller action. If no template
name is given, then the any view may be rendered. If no view is actually
rendered, then an assertion failure will occur.
</p>
<pre>
 def test_my_action_does_what_it_should
   should_render_view 'show'

   get :show, :id =&gt; 1

   assert_response :success
 end
</pre>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>