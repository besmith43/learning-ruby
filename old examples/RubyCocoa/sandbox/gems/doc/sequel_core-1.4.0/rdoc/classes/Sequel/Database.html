<?xml version="1.0" encoding="iso-8859-1"?>
<!--
 ! Excerpted from "RubyCocoa",
 ! published by The Pragmatic Bookshelf.
 ! Copyrights apply to this code. It may not be used to create training material, 
 ! courses, books, articles, and the like. Contact us if you are in doubt.
 ! We make no guarantees that this code is fit for any purpose. 
 ! Visit http://www.pragmaticprogrammer.com/titles/bmrc for more book information.
-->
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: Sequel::Database</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">Sequel::Database</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../files/lib/sequel_core/database_rb.html">
                lib/sequel_core/database.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                <a href="../Object.html">
                Object
               </a>
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
A <a href="Database.html">Database</a> object represents a virtual
connection to a database. The <a href="Database.html">Database</a> class is
meant to be subclassed by database adapters in order to provide the
functionality needed for executing queries.
</p>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000884">&lt;&lt;</a>&nbsp;&nbsp;
      <a href="#M000877">&gt;&gt;</a>&nbsp;&nbsp;
      <a href="#M000881">[]</a>&nbsp;&nbsp;
      <a href="#M000909">adapter_class</a>&nbsp;&nbsp;
      <a href="#M000907">adapter_scheme</a>&nbsp;&nbsp;
      <a href="#M000893">add_column</a>&nbsp;&nbsp;
      <a href="#M000898">add_index</a>&nbsp;&nbsp;
      <a href="#M000892">alter_table</a>&nbsp;&nbsp;
      <a href="#M000910">connect</a>&nbsp;&nbsp;
      <a href="#M000869">connect</a>&nbsp;&nbsp;
      <a href="#M000902">create_or_replace_view</a>&nbsp;&nbsp;
      <a href="#M000888">create_table</a>&nbsp;&nbsp;
      <a href="#M000889">create_table!</a>&nbsp;&nbsp;
      <a href="#M000901">create_view</a>&nbsp;&nbsp;
      <a href="#M000875">dataset</a>&nbsp;&nbsp;
      <a href="#M000870">disconnect</a>&nbsp;&nbsp;
      <a href="#M000894">drop_column</a>&nbsp;&nbsp;
      <a href="#M000899">drop_index</a>&nbsp;&nbsp;
      <a href="#M000890">drop_table</a>&nbsp;&nbsp;
      <a href="#M000903">drop_view</a>&nbsp;&nbsp;
      <a href="#M000883">execute</a>&nbsp;&nbsp;
      <a href="#M000876">fetch</a>&nbsp;&nbsp;
      <a href="#M000879">from</a>&nbsp;&nbsp;
      <a href="#M000882">get</a>&nbsp;&nbsp;
      <a href="#M000905">inspect</a>&nbsp;&nbsp;
      <a href="#M000871">multi_threaded?</a>&nbsp;&nbsp;
      <a href="#M000868">new</a>&nbsp;&nbsp;
      <a href="#M000878">query</a>&nbsp;&nbsp;
      <a href="#M000895">rename_column</a>&nbsp;&nbsp;
      <a href="#M000891">rename_table</a>&nbsp;&nbsp;
      <a href="#M000880">select</a>&nbsp;&nbsp;
      <a href="#M000887">serial_primary_key_options</a>&nbsp;&nbsp;
      <a href="#M000906">set_adapter_scheme</a>&nbsp;&nbsp;
      <a href="#M000897">set_column_default</a>&nbsp;&nbsp;
      <a href="#M000896">set_column_type</a>&nbsp;&nbsp;
      <a href="#M000911">single_threaded=</a>&nbsp;&nbsp;
      <a href="#M000872">single_threaded?</a>&nbsp;&nbsp;
      <a href="#M000885">synchronize</a>&nbsp;&nbsp;
      <a href="#M000900">table_exists?</a>&nbsp;&nbsp;
      <a href="#M000886">test_connection</a>&nbsp;&nbsp;
      <a href="#M000904">transaction</a>&nbsp;&nbsp;
      <a href="#M000873">uri</a>&nbsp;&nbsp;
      <a href="#M000908">uri_to_options</a>&nbsp;&nbsp;
      <a href="#M000874">url</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->
    <div id="includes">
      <h3 class="section-bar">Included Modules</h3>

      <div id="includes-list">
        <span class="include-name"><a href="Schema/SQL.html">Schema::SQL</a></span>
      </div>
    </div>

    <div id="section">


    <div id="constants-list">
      <h3 class="section-bar">Constants</h3>

      <div class="name-list">
        <table summary="Constants">
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">SQL_BEGIN</td>
          <td>=</td>
          <td class="context-item-value">'BEGIN'.freeze</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">SQL_COMMIT</td>
          <td>=</td>
          <td class="context-item-value">'COMMIT'.freeze</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">SQL_ROLLBACK</td>
          <td>=</td>
          <td class="context-item-value">'ROLLBACK'.freeze</td>
        </tr>
        </table>
      </div>
    </div>



    <div id="attribute-list">
      <h3 class="section-bar">Attributes</h3>

      <div class="name-list">
        <table>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">logger</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">opts</td>
          <td class="context-item-value">&nbsp;[R]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">pool</td>
          <td class="context-item-value">&nbsp;[R]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        </table>
      </div>
    </div>
      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Class methods</h3>

      <div id="method-M000909" class="method-detail">
        <a name="M000909"></a>

        <div class="method-heading">
          <a href="#M000909" class="method-signature">
          <span class="method-name">adapter_class</span><span class="method-args">(scheme)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000909-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000909-source">
<pre>
     <span class="ruby-comment cmt"># File lib/sequel_core/database.rb, line 394</span>
394:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">adapter_class</span>(<span class="ruby-identifier">scheme</span>)
395:       <span class="ruby-identifier">adapter_name</span> = <span class="ruby-identifier">scheme</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/\-/</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">scheme</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-value str">'-'</span>, <span class="ruby-value str">'_'</span>).<span class="ruby-identifier">to_sym</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">scheme</span>.<span class="ruby-identifier">to_sym</span>
396:       <span class="ruby-identifier">scheme</span> = <span class="ruby-identifier">scheme</span>.<span class="ruby-identifier">to_sym</span>
397:       
398:       <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">klass</span> = <span class="ruby-ivar">@@adapters</span>[<span class="ruby-identifier">scheme</span>]).<span class="ruby-identifier">nil?</span>
399:         <span class="ruby-comment cmt"># attempt to load the adapter file</span>
400:         <span class="ruby-keyword kw">begin</span>
401:           <span class="ruby-identifier">require</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-keyword kw">__FILE__</span>), <span class="ruby-node">&quot;adapters/#{scheme}&quot;</span>)
402:         <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">LoadError</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
403:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">Error</span><span class="ruby-operator">::</span><span class="ruby-constant">AdapterNotFound</span>, <span class="ruby-node">&quot;Could not load #{scheme} adapter:\n  #{e.message}&quot;</span>
404:         <span class="ruby-keyword kw">end</span>
405:         
406:         <span class="ruby-comment cmt"># make sure we actually loaded the adapter</span>
407:         <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">klass</span> = <span class="ruby-ivar">@@adapters</span>[<span class="ruby-identifier">scheme</span>]).<span class="ruby-identifier">nil?</span>
408:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">Error</span><span class="ruby-operator">::</span><span class="ruby-constant">AdapterNotFound</span>, <span class="ruby-node">&quot;Could not load #{scheme} adapter&quot;</span>
409:         <span class="ruby-keyword kw">end</span>
410:       <span class="ruby-keyword kw">end</span>
411:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">klass</span>
412:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000907" class="method-detail">
        <a name="M000907"></a>

        <div class="method-heading">
          <a href="#M000907" class="method-signature">
          <span class="method-name">adapter_scheme</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the scheme for the <a href="Database.html">Database</a> class.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000907-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000907-source">
<pre>
     <span class="ruby-comment cmt"># File lib/sequel_core/database.rb, line 375</span>
375:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">adapter_scheme</span>
376:       <span class="ruby-ivar">@scheme</span>
377:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000910" class="method-detail">
        <a name="M000910"></a>

        <div class="method-heading">
          <a href="#M000910" class="method-signature">
          <span class="method-name">Sequel::Database.connect(conn_string)<br />
Sequel::Database.connect(opts)<br />
Sequel.connect(conn_string)<br />
Sequel.connect(opts)<br />
Sequel.open(conn_string)<br />
Sequel.open(opts)<br />
</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Creates a <a href="Database.html#M000868">new</a> database object based on
the supplied connection string and or options. If a URI is used, the URI
scheme determines the database class used, and the rest of the string
specifies the connection options. For example:
</p>
<pre>
  DB = Sequel.open 'sqlite:///blog.db'
</pre>
<p>
The second form of this method takes an options:
</p>
<pre>
  DB = Sequel.open :adapter =&gt; :sqlite, :database =&gt; 'blog.db'
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000910-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000910-source">
<pre>
     <span class="ruby-comment cmt"># File lib/sequel_core/database.rb, line 432</span>
432:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">connect</span>(<span class="ruby-identifier">conn_string</span>, <span class="ruby-identifier">opts</span> = <span class="ruby-keyword kw">nil</span>)
433:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">conn_string</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">String</span>)
434:         <span class="ruby-identifier">uri</span> = <span class="ruby-constant">URI</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">conn_string</span>)
435:         <span class="ruby-identifier">scheme</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">scheme</span>
436:         <span class="ruby-identifier">scheme</span> = <span class="ruby-identifier">:dbi</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">scheme</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^dbi-(.+)/</span>
437:         <span class="ruby-identifier">c</span> = <span class="ruby-identifier">adapter_class</span>(<span class="ruby-identifier">scheme</span>)
438:         <span class="ruby-identifier">opts</span> = <span class="ruby-identifier">c</span>.<span class="ruby-identifier">uri_to_options</span>(<span class="ruby-identifier">uri</span>).<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">opts</span> <span class="ruby-operator">||</span> {})
439:       <span class="ruby-keyword kw">else</span>
440:         <span class="ruby-identifier">opts</span> = <span class="ruby-identifier">conn_string</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">opts</span> <span class="ruby-operator">||</span> {})
441:         <span class="ruby-identifier">c</span> = <span class="ruby-identifier">adapter_class</span>(<span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:adapter</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value str">'adapter'</span>])
442:       <span class="ruby-keyword kw">end</span>
443:       <span class="ruby-comment cmt"># process opts a bit</span>
444:       <span class="ruby-identifier">opts</span> = <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">inject</span>({}) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">m</span>, <span class="ruby-identifier">kv</span><span class="ruby-operator">|</span> <span class="ruby-identifier">k</span>, <span class="ruby-identifier">v</span> = <span class="ruby-operator">*</span><span class="ruby-identifier">kv</span>
445:         <span class="ruby-identifier">k</span> = <span class="ruby-identifier">:user</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">k</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'username'</span>
446:         <span class="ruby-identifier">m</span>[<span class="ruby-identifier">k</span>.<span class="ruby-identifier">to_sym</span>] = <span class="ruby-identifier">v</span>
447:         <span class="ruby-identifier">m</span>
448:       <span class="ruby-keyword kw">end</span>
449:       <span class="ruby-identifier">c</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">opts</span>)
450:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000868" class="method-detail">
        <a name="M000868"></a>

        <div class="method-heading">
          <a href="#M000868" class="method-signature">
          <span class="method-name">new</span><span class="method-args">(opts = {}, &amp;block)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Constructs a <a href="Database.html#M000868">new</a> instance of a database
connection with the specified options hash.
</p>
<p>
<a href="Database.html">Sequel::Database</a> is an abstract class that is
not useful by itself.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000868-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000868-source">
<pre>
    <span class="ruby-comment cmt"># File lib/sequel_core/database.rb, line 15</span>
15:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">opts</span> = {}, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
16:       <span class="ruby-constant">Model</span>.<span class="ruby-identifier">database_opened</span>(<span class="ruby-keyword kw">self</span>)
17:       <span class="ruby-ivar">@opts</span> = <span class="ruby-identifier">opts</span>
18:       
19:       <span class="ruby-comment cmt"># Determine if the DB is single threaded or multi threaded</span>
20:       <span class="ruby-ivar">@single_threaded</span> = <span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:single_threaded</span>] <span class="ruby-operator">||</span> <span class="ruby-ivar">@@single_threaded</span>
21:       <span class="ruby-comment cmt"># Construct pool</span>
22:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@single_threaded</span>
23:         <span class="ruby-ivar">@pool</span> = <span class="ruby-constant">SingleThreadedPool</span>.<span class="ruby-identifier">new</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
24:       <span class="ruby-keyword kw">else</span>
25:         <span class="ruby-ivar">@pool</span> = <span class="ruby-constant">ConnectionPool</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:max_connections</span>] <span class="ruby-operator">||</span> <span class="ruby-value">4</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
26:       <span class="ruby-keyword kw">end</span>
27:       <span class="ruby-ivar">@pool</span>.<span class="ruby-identifier">connection_proc</span> = <span class="ruby-identifier">block</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">proc</span> {<span class="ruby-identifier">connect</span>}
28: 
29:       <span class="ruby-ivar">@logger</span> = <span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:logger</span>]
30:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000906" class="method-detail">
        <a name="M000906"></a>

        <div class="method-heading">
          <a href="#M000906" class="method-signature">
          <span class="method-name">set_adapter_scheme</span><span class="method-args">(scheme)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Sets the adapter scheme for the <a href="Database.html">Database</a> class.
Call this method in descendnants of <a href="Database.html">Database</a> to
allow connection using a URL. For example the following:
</p>
<pre>
  class DB2::Database &lt; Sequel::Database
    set_adapter_scheme :db2
    ...
  end
</pre>
<p>
would allow connection using:
</p>
<pre>
  Sequel.open('db2://user:password@dbserver/mydb')
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000906-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000906-source">
<pre>
     <span class="ruby-comment cmt"># File lib/sequel_core/database.rb, line 369</span>
369:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">set_adapter_scheme</span>(<span class="ruby-identifier">scheme</span>)
370:       <span class="ruby-ivar">@scheme</span> = <span class="ruby-identifier">scheme</span>
371:       <span class="ruby-ivar">@@adapters</span>[<span class="ruby-identifier">scheme</span>.<span class="ruby-identifier">to_sym</span>] = <span class="ruby-keyword kw">self</span>
372:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000911" class="method-detail">
        <a name="M000911"></a>

        <div class="method-heading">
          <a href="#M000911" class="method-signature">
          <span class="method-name">single_threaded=</span><span class="method-args">(value)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Sets the default single_threaded mode for <a
href="Database.html#M000868">new</a> databases.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000911-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000911-source">
<pre>
     <span class="ruby-comment cmt"># File lib/sequel_core/database.rb, line 455</span>
455:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">single_threaded=</span>(<span class="ruby-identifier">value</span>)
456:       <span class="ruby-ivar">@@single_threaded</span> = <span class="ruby-identifier">value</span>
457:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000908" class="method-detail">
        <a name="M000908"></a>

        <div class="method-heading">
          <a href="#M000908" class="method-signature">
          <span class="method-name">uri_to_options</span><span class="method-args">(uri)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Converts a <a href="Database.html#M000873">uri</a> to an options hash.
These options are then passed to a newly created database object.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000908-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000908-source">
<pre>
     <span class="ruby-comment cmt"># File lib/sequel_core/database.rb, line 381</span>
381:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">uri_to_options</span>(<span class="ruby-identifier">uri</span>)
382:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">String</span>)
383:         <span class="ruby-identifier">uri</span> = <span class="ruby-constant">URI</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">uri</span>)
384:       <span class="ruby-keyword kw">end</span>
385:       {
386:         <span class="ruby-identifier">:user</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">user</span>,
387:         <span class="ruby-identifier">:password</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">password</span>,
388:         <span class="ruby-identifier">:host</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">host</span>,
389:         <span class="ruby-identifier">:port</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">port</span>,
390:         <span class="ruby-identifier">:database</span> =<span class="ruby-operator">&gt;</span> (<span class="ruby-identifier">uri</span>.<span class="ruby-identifier">path</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/\/(.*)/</span>) <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-identifier">$1</span>)
391:       }
392:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000884" class="method-detail">
        <a name="M000884"></a>

        <div class="method-heading">
          <a href="#M000884" class="method-signature">
          <span class="method-name">&lt;&lt;</span><span class="method-args">(sql)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Executes the supplied <a href="SQL.html">SQL</a> statement. The <a
href="SQL.html">SQL</a> can be supplied as a string or as an array of
strings. If an array is give, comments and excessive white space are
removed. See also <a href="../Array.html#M000538">Array#to_sql</a>.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000884-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000884-source">
<pre>
     <span class="ruby-comment cmt"># File lib/sequel_core/database.rb, line 157</span>
157:     <span class="ruby-keyword kw">def</span> <span class="ruby-operator">&lt;&lt;</span>(<span class="ruby-identifier">sql</span>); <span class="ruby-identifier">execute</span>((<span class="ruby-constant">Array</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">sql</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">sql</span>.<span class="ruby-identifier">to_sql</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">sql</span>); <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000877" class="method-detail">
        <a name="M000877"></a>

        <div class="method-heading">
          <span class="method-name">&gt;&gt;</span><span class="method-args">(sql, *args, &amp;block)</span>
        </div>
      
        <div class="method-description">
          <p>
Alias for <a href="Database.html#M000876">fetch</a>
</p>
        </div>
      </div>

      <div id="method-M000881" class="method-detail">
        <a name="M000881"></a>

        <div class="method-heading">
          <a href="#M000881" class="method-signature">
          <span class="method-name">[]</span><span class="method-args">(*args)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns a <a href="Database.html#M000875">dataset</a> <a
href="Database.html#M000879">from</a> the database. If the first argument
is a string, the method acts as an alias for <a
href="Database.html#M000876">Database#fetch</a>, returning a <a
href="Database.html#M000875">dataset</a> for arbitrary <a
href="SQL.html">SQL</a>:
</p>
<pre>
  DB['SELECT * FROM items WHERE name = ?', my_name].print
</pre>
<p>
Otherwise, the <a href="Database.html#M000875">dataset</a> returned has its
<a href="Database.html#M000879">from</a> option set to the given arguments:
</p>
<pre>
  DB[:items].sql #=&gt; &quot;SELECT * FROM items&quot;
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000881-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000881-source">
<pre>
     <span class="ruby-comment cmt"># File lib/sequel_core/database.rb, line 134</span>
134:     <span class="ruby-keyword kw">def</span> <span class="ruby-operator">[]</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
135:       (<span class="ruby-constant">String</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">first</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">fetch</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">from</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
136:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000893" class="method-detail">
        <a name="M000893"></a>

        <div class="method-heading">
          <a href="#M000893" class="method-signature">
          <span class="method-name">add_column</span><span class="method-args">(table, *args)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Adds a column to the specified table. This method expects a column name, a
datatype and optionally a hash with additional constraints and options:
</p>
<pre>
  DB.add_column :items, :name, :text, :unique =&gt; true, :null =&gt; false
  DB.add_column :items, :category, :text, :default =&gt; 'ruby'
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000893-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000893-source">
<pre>
     <span class="ruby-comment cmt"># File lib/sequel_core/database.rb, line 237</span>
237:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">add_column</span>(<span class="ruby-identifier">table</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
238:       <span class="ruby-identifier">alter_table</span>(<span class="ruby-identifier">table</span>) {<span class="ruby-identifier">add_column</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)}
239:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000898" class="method-detail">
        <a name="M000898"></a>

        <div class="method-heading">
          <a href="#M000898" class="method-signature">
          <span class="method-name">add_index</span><span class="method-args">(table, *args)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Adds an index to a table for the given columns:
</p>
<pre>
  DB.add_index :posts, :title
  DB.add_index :posts, [:author, :title], :unique =&gt; true
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000898-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000898-source">
<pre>
     <span class="ruby-comment cmt"># File lib/sequel_core/database.rb, line 274</span>
274:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">add_index</span>(<span class="ruby-identifier">table</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
275:       <span class="ruby-identifier">alter_table</span>(<span class="ruby-identifier">table</span>) {<span class="ruby-identifier">add_index</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)}
276:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000892" class="method-detail">
        <a name="M000892"></a>

        <div class="method-heading">
          <a href="#M000892" class="method-signature">
          <span class="method-name">alter_table</span><span class="method-args">(name, &amp;block)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Alters the given table with the specified block. Here are the currently
available operations:
</p>
<pre>
  DB.alter_table :items do
    add_column :category, :text, :default =&gt; 'ruby'
    drop_column :category
    rename_column :cntr, :counter
    set_column_type :value, :float
    set_column_default :value, :float
    add_index [:group, :category]
    drop_index [:group, :category]
  end
</pre>
<p>
Note that <a href="Database.html#M000893">add_column</a> accepts all the
options available for column definitions using <a
href="Database.html#M000888">create_table</a>, and <a
href="Database.html#M000898">add_index</a> accepts all the options
available for index definition.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000892-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000892-source">
<pre>
     <span class="ruby-comment cmt"># File lib/sequel_core/database.rb, line 227</span>
227:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">alter_table</span>(<span class="ruby-identifier">name</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
228:       <span class="ruby-identifier">g</span> = <span class="ruby-constant">Schema</span><span class="ruby-operator">::</span><span class="ruby-constant">AlterTableGenerator</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword kw">self</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
229:       <span class="ruby-identifier">alter_table_sql_list</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">g</span>.<span class="ruby-identifier">operations</span>).<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">sql</span><span class="ruby-operator">|</span> <span class="ruby-identifier">execute</span>(<span class="ruby-identifier">sql</span>)}
230:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000869" class="method-detail">
        <a name="M000869"></a>

        <div class="method-heading">
          <a href="#M000869" class="method-signature">
          <span class="method-name">connect</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Connects to the database. This method should be overriden by descendants.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000869-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000869-source">
<pre>
    <span class="ruby-comment cmt"># File lib/sequel_core/database.rb, line 33</span>
33:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">connect</span>
34:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">NotImplementedError</span>, <span class="ruby-value str">&quot;#connect should be overriden by adapters&quot;</span>
35:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000902" class="method-detail">
        <a name="M000902"></a>

        <div class="method-heading">
          <a href="#M000902" class="method-signature">
          <span class="method-name">create_or_replace_view</span><span class="method-args">(name, source)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Creates a view, replacing it if it already exists:
</p>
<pre>
  DB.create_or_replace_view(:cheap_items, &quot;SELECT * FROM items WHERE price &lt; 100&quot;)
  DB.create_or_replace_view(:ruby_items, DB[:items].filter(:category =&gt; 'ruby'))
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000902-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000902-source">
<pre>
     <span class="ruby-comment cmt"># File lib/sequel_core/database.rb, line 311</span>
311:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">create_or_replace_view</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">source</span>)
312:       <span class="ruby-identifier">source</span> = <span class="ruby-identifier">source</span>.<span class="ruby-identifier">sql</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">source</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Dataset</span>)
313:       <span class="ruby-identifier">execute</span>(<span class="ruby-node">&quot;CREATE OR REPLACE VIEW #{name} AS #{source}&quot;</span>)
314:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000888" class="method-detail">
        <a name="M000888"></a>

        <div class="method-heading">
          <a href="#M000888" class="method-signature">
          <span class="method-name">create_table</span><span class="method-args">(name, &amp;block)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Creates a table. The easiest way to use this method is to provide a block:
</p>
<pre>
  DB.create_table :posts do
    primary_key :id, :serial
    column :title, :text
    column :content, :text
    index :title
  end
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000888-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000888-source">
<pre>
     <span class="ruby-comment cmt"># File lib/sequel_core/database.rb, line 186</span>
186:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">create_table</span>(<span class="ruby-identifier">name</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
187:       <span class="ruby-identifier">g</span> = <span class="ruby-constant">Schema</span><span class="ruby-operator">::</span><span class="ruby-constant">Generator</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword kw">self</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
188:       <span class="ruby-identifier">create_table_sql_list</span>(<span class="ruby-identifier">name</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">g</span>.<span class="ruby-identifier">create_info</span>).<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">sql</span><span class="ruby-operator">|</span> <span class="ruby-identifier">execute</span>(<span class="ruby-identifier">sql</span>)}
189:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000889" class="method-detail">
        <a name="M000889"></a>

        <div class="method-heading">
          <a href="#M000889" class="method-signature">
          <span class="method-name">create_table!</span><span class="method-args">(name, &amp;block)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Forcibly creates a table. If the table already exists it is dropped.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000889-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000889-source">
<pre>
     <span class="ruby-comment cmt"># File lib/sequel_core/database.rb, line 192</span>
192:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">create_table!</span>(<span class="ruby-identifier">name</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
193:       <span class="ruby-identifier">drop_table</span>(<span class="ruby-identifier">name</span>) <span class="ruby-keyword kw">rescue</span> <span class="ruby-keyword kw">nil</span>
194:       <span class="ruby-identifier">create_table</span>(<span class="ruby-identifier">name</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
195:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000901" class="method-detail">
        <a name="M000901"></a>

        <div class="method-heading">
          <a href="#M000901" class="method-signature">
          <span class="method-name">create_view</span><span class="method-args">(name, source)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Creates a view based on a <a href="Database.html#M000875">dataset</a> or an
<a href="SQL.html">SQL</a> string:
</p>
<pre>
  DB.create_view(:cheap_items, &quot;SELECT * FROM items WHERE price &lt; 100&quot;)
  DB.create_view(:ruby_items, DB[:items].filter(:category =&gt; 'ruby'))
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000901-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000901-source">
<pre>
     <span class="ruby-comment cmt"># File lib/sequel_core/database.rb, line 302</span>
302:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">create_view</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">source</span>)
303:       <span class="ruby-identifier">source</span> = <span class="ruby-identifier">source</span>.<span class="ruby-identifier">sql</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">source</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Dataset</span>)
304:       <span class="ruby-identifier">execute</span>(<span class="ruby-node">&quot;CREATE VIEW #{name} AS #{source}&quot;</span>)
305:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000875" class="method-detail">
        <a name="M000875"></a>

        <div class="method-heading">
          <a href="#M000875" class="method-signature">
          <span class="method-name">dataset</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns a blank <a href="Database.html#M000875">dataset</a>
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000875-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000875-source">
<pre>
    <span class="ruby-comment cmt"># File lib/sequel_core/database.rb, line 73</span>
73:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">dataset</span>
74:       <span class="ruby-identifier">ds</span> = <span class="ruby-constant">Sequel</span><span class="ruby-operator">::</span><span class="ruby-constant">Dataset</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword kw">self</span>)
75:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000870" class="method-detail">
        <a name="M000870"></a>

        <div class="method-heading">
          <a href="#M000870" class="method-signature">
          <span class="method-name">disconnect</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Disconnects <a href="Database.html#M000879">from</a> the database. This
method should be overriden by descendants.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000870-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000870-source">
<pre>
    <span class="ruby-comment cmt"># File lib/sequel_core/database.rb, line 39</span>
39:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">disconnect</span>
40:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">NotImplementedError</span>, <span class="ruby-value str">&quot;#disconnect should be overriden by adapters&quot;</span>
41:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000894" class="method-detail">
        <a name="M000894"></a>

        <div class="method-heading">
          <a href="#M000894" class="method-signature">
          <span class="method-name">drop_column</span><span class="method-args">(table, *args)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Removes a column <a href="Database.html#M000879">from</a> the specified
table:
</p>
<pre>
  DB.drop_column :items, :category
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000894-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000894-source">
<pre>
     <span class="ruby-comment cmt"># File lib/sequel_core/database.rb, line 244</span>
244:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">drop_column</span>(<span class="ruby-identifier">table</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
245:       <span class="ruby-identifier">alter_table</span>(<span class="ruby-identifier">table</span>) {<span class="ruby-identifier">drop_column</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)}
246:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000899" class="method-detail">
        <a name="M000899"></a>

        <div class="method-heading">
          <a href="#M000899" class="method-signature">
          <span class="method-name">drop_index</span><span class="method-args">(table, columns)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Removes an index for the given table and column/s:
</p>
<pre>
  DB.drop_index :posts, :title
  DB.drop_index :posts, [:author, :title]
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000899-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000899-source">
<pre>
     <span class="ruby-comment cmt"># File lib/sequel_core/database.rb, line 282</span>
282:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">drop_index</span>(<span class="ruby-identifier">table</span>, <span class="ruby-identifier">columns</span>)
283:       <span class="ruby-identifier">alter_table</span>(<span class="ruby-identifier">table</span>) {<span class="ruby-identifier">drop_index</span>(<span class="ruby-identifier">columns</span>)}
284:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000890" class="method-detail">
        <a name="M000890"></a>

        <div class="method-heading">
          <a href="#M000890" class="method-signature">
          <span class="method-name">drop_table</span><span class="method-args">(*names)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Drops one or more tables corresponding to the given table names.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000890-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000890-source">
<pre>
     <span class="ruby-comment cmt"># File lib/sequel_core/database.rb, line 198</span>
198:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">drop_table</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">names</span>)
199:       <span class="ruby-identifier">names</span>.<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">n</span><span class="ruby-operator">|</span> <span class="ruby-identifier">execute</span>(<span class="ruby-identifier">drop_table_sql</span>(<span class="ruby-identifier">n</span>))}
200:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000903" class="method-detail">
        <a name="M000903"></a>

        <div class="method-heading">
          <a href="#M000903" class="method-signature">
          <span class="method-name">drop_view</span><span class="method-args">(name)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Drops a view:
</p>
<pre>
  DB.drop_view(:cheap_items)
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000903-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000903-source">
<pre>
     <span class="ruby-comment cmt"># File lib/sequel_core/database.rb, line 319</span>
319:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">drop_view</span>(<span class="ruby-identifier">name</span>)
320:       <span class="ruby-identifier">execute</span>(<span class="ruby-node">&quot;DROP VIEW #{name}&quot;</span>)
321:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000883" class="method-detail">
        <a name="M000883"></a>

        <div class="method-heading">
          <a href="#M000883" class="method-signature">
          <span class="method-name">execute</span><span class="method-args">(sql)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Raises a Sequel::Error::NotImplemented. This method is overriden in
descendants.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000883-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000883-source">
<pre>
     <span class="ruby-comment cmt"># File lib/sequel_core/database.rb, line 150</span>
150:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">execute</span>(<span class="ruby-identifier">sql</span>)
151:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">NotImplementedError</span>, <span class="ruby-value str">&quot;#execute should be overriden by adapters&quot;</span>
152:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000876" class="method-detail">
        <a name="M000876"></a>

        <div class="method-heading">
          <a href="#M000876" class="method-signature">
          <span class="method-name">fetch</span><span class="method-args">(sql, *args, &amp;block)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Fetches records for an arbitrary <a href="SQL.html">SQL</a> statement. If a
block is given, it is used to iterate over the records:
</p>
<pre>
  DB.fetch('SELECT * FROM items') {|r| p r}
</pre>
<p>
If a block is not given, the method returns a <a
href="Database.html#M000875">dataset</a> instance:
</p>
<pre>
  DB.fetch('SELECT * FROM items').print
</pre>
<p>
Fetch can also perform parameterized queries for protection against <a
href="SQL.html">SQL</a> injection:
</p>
<pre>
  DB.fetch('SELECT * FROM items WHERE name = ?', my_name).print
</pre>
<p>
A short-hand form for <a href="Database.html#M000876">Database#fetch</a> is
<a href="Database.html">Database</a>#[]:
</p>
<pre>
  DB['SELECT * FROM items'].each {|r| p r}
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000876-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000876-source">
<pre>
     <span class="ruby-comment cmt"># File lib/sequel_core/database.rb, line 95</span>
 95:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">fetch</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
 96:       <span class="ruby-identifier">ds</span> = <span class="ruby-identifier">dataset</span>
 97:       <span class="ruby-identifier">sql</span> = <span class="ruby-identifier">sql</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-value str">'?'</span>) {<span class="ruby-operator">|</span><span class="ruby-identifier">m</span><span class="ruby-operator">|</span>  <span class="ruby-identifier">ds</span>.<span class="ruby-identifier">literal</span>(<span class="ruby-identifier">args</span>.<span class="ruby-identifier">shift</span>)}
 98:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block</span>
 99:         <span class="ruby-identifier">ds</span>.<span class="ruby-identifier">fetch_rows</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
100:       <span class="ruby-keyword kw">else</span>
101:         <span class="ruby-identifier">ds</span>.<span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:sql</span>] = <span class="ruby-identifier">sql</span>
102:         <span class="ruby-identifier">ds</span>
103:       <span class="ruby-keyword kw">end</span>
104:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000879" class="method-detail">
        <a name="M000879"></a>

        <div class="method-heading">
          <a href="#M000879" class="method-signature">
          <span class="method-name">from</span><span class="method-args">(*args, &amp;block)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns a <a href="Database.html#M000868">new</a> <a
href="Database.html#M000875">dataset</a> with the <a
href="Database.html#M000879">from</a> method invoked. If a block is given,
it is used as a filter on the <a href="Database.html#M000875">dataset</a>.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000879-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000879-source">
<pre>
     <span class="ruby-comment cmt"># File lib/sequel_core/database.rb, line 115</span>
115:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">from</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
116:       <span class="ruby-identifier">ds</span> = <span class="ruby-identifier">dataset</span>.<span class="ruby-identifier">from</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
117:       <span class="ruby-identifier">block</span> <span class="ruby-value">? </span><span class="ruby-identifier">ds</span>.<span class="ruby-identifier">filter</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">ds</span>
118:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000882" class="method-detail">
        <a name="M000882"></a>

        <div class="method-heading">
          <a href="#M000882" class="method-signature">
          <span class="method-name">get</span><span class="method-args">(expr)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns a single value <a href="Database.html#M000879">from</a> the
database, e.g.:
</p>
<pre>
  # SELECT 1
  DB.get(1) #=&gt; 1

  # SELECT version()
  DB.get(:version[]) #=&gt; ...
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000882-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000882-source">
<pre>
     <span class="ruby-comment cmt"># File lib/sequel_core/database.rb, line 145</span>
145:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">get</span>(<span class="ruby-identifier">expr</span>)
146:       <span class="ruby-identifier">dataset</span>.<span class="ruby-identifier">get</span>(<span class="ruby-identifier">expr</span>)
147:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000905" class="method-detail">
        <a name="M000905"></a>

        <div class="method-heading">
          <a href="#M000905" class="method-signature">
          <span class="method-name">inspect</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns a string representation of the database object including the class
name and the connection URI.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000905-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000905-source">
<pre>
     <span class="ruby-comment cmt"># File lib/sequel_core/database.rb, line 354</span>
354:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">inspect</span>
355:       <span class="ruby-value str">'#&lt;%s: %s&gt;'</span> <span class="ruby-operator">%</span> [<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">to_s</span>, <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">inspect</span>]
356:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000871" class="method-detail">
        <a name="M000871"></a>

        <div class="method-heading">
          <a href="#M000871" class="method-signature">
          <span class="method-name">multi_threaded?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns true if the database is using a multi-threaded connection pool.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000871-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000871-source">
<pre>
    <span class="ruby-comment cmt"># File lib/sequel_core/database.rb, line 44</span>
44:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">multi_threaded?</span>
45:       <span class="ruby-operator">!</span><span class="ruby-ivar">@single_threaded</span>
46:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000878" class="method-detail">
        <a name="M000878"></a>

        <div class="method-heading">
          <a href="#M000878" class="method-signature">
          <span class="method-name">query</span><span class="method-args">(&amp;block)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Converts a <a href="Database.html#M000878">query</a> block into a <a
href="Database.html#M000875">dataset</a>. For more information see
Dataset#query.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000878-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000878-source">
<pre>
     <span class="ruby-comment cmt"># File lib/sequel_core/database.rb, line 109</span>
109:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">query</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
110:       <span class="ruby-identifier">dataset</span>.<span class="ruby-identifier">query</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
111:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000895" class="method-detail">
        <a name="M000895"></a>

        <div class="method-heading">
          <a href="#M000895" class="method-signature">
          <span class="method-name">rename_column</span><span class="method-args">(table, *args)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Renames a column in the specified table. This method expects the current
column name and the <a href="Database.html#M000868">new</a> column name:
</p>
<pre>
  DB.rename_column :items, :cntr, :counter
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000895-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000895-source">
<pre>
     <span class="ruby-comment cmt"># File lib/sequel_core/database.rb, line 252</span>
252:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rename_column</span>(<span class="ruby-identifier">table</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
253:       <span class="ruby-identifier">alter_table</span>(<span class="ruby-identifier">table</span>) {<span class="ruby-identifier">rename_column</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)}
254:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000891" class="method-detail">
        <a name="M000891"></a>

        <div class="method-heading">
          <a href="#M000891" class="method-signature">
          <span class="method-name">rename_table</span><span class="method-args">(*args)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Renames a table:
</p>
<pre>
  DB.tables #=&gt; [:items]
  DB.rename_table :items, :old_items
  DB.tables #=&gt; [:old_items]
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000891-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000891-source">
<pre>
     <span class="ruby-comment cmt"># File lib/sequel_core/database.rb, line 207</span>
207:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rename_table</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
208:       <span class="ruby-identifier">execute</span>(<span class="ruby-identifier">rename_table_sql</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>))
209:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000880" class="method-detail">
        <a name="M000880"></a>

        <div class="method-heading">
          <a href="#M000880" class="method-signature">
          <span class="method-name">select</span><span class="method-args">(*args)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns a <a href="Database.html#M000868">new</a> <a
href="Database.html#M000875">dataset</a> with the <a
href="Database.html#M000880">select</a> method invoked.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000880-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000880-source">
<pre>
     <span class="ruby-comment cmt"># File lib/sequel_core/database.rb, line 121</span>
121:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">select</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>); <span class="ruby-identifier">dataset</span>.<span class="ruby-identifier">select</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>); <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000887" class="method-detail">
        <a name="M000887"></a>

        <div class="method-heading">
          <a href="#M000887" class="method-signature">
          <span class="method-name">serial_primary_key_options</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
default serial primary key definition. this should be overriden for each
adapter.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000887-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000887-source">
<pre>
     <span class="ruby-comment cmt"># File lib/sequel_core/database.rb, line 174</span>
174:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">serial_primary_key_options</span>
175:       {<span class="ruby-identifier">:primary_key</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:type</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:integer</span>, <span class="ruby-identifier">:auto_increment</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>}
176:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000897" class="method-detail">
        <a name="M000897"></a>

        <div class="method-heading">
          <a href="#M000897" class="method-signature">
          <span class="method-name">set_column_default</span><span class="method-args">(table, *args)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Sets the default value for the given column in the given table:
</p>
<pre>
  DB.set_column_default :items, :category, 'perl!'
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000897-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000897-source">
<pre>
     <span class="ruby-comment cmt"># File lib/sequel_core/database.rb, line 266</span>
266:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">set_column_default</span>(<span class="ruby-identifier">table</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
267:       <span class="ruby-identifier">alter_table</span>(<span class="ruby-identifier">table</span>) {<span class="ruby-identifier">set_column_default</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)}
268:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000896" class="method-detail">
        <a name="M000896"></a>

        <div class="method-heading">
          <a href="#M000896" class="method-signature">
          <span class="method-name">set_column_type</span><span class="method-args">(table, *args)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Set the data type for the given column in the given table:
</p>
<pre>
  DB.set_column_type :items, :price, :float
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000896-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000896-source">
<pre>
     <span class="ruby-comment cmt"># File lib/sequel_core/database.rb, line 259</span>
259:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">set_column_type</span>(<span class="ruby-identifier">table</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
260:       <span class="ruby-identifier">alter_table</span>(<span class="ruby-identifier">table</span>) {<span class="ruby-identifier">set_column_type</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)}
261:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000872" class="method-detail">
        <a name="M000872"></a>

        <div class="method-heading">
          <a href="#M000872" class="method-signature">
          <span class="method-name">single_threaded?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns true if the database is using a single-threaded connection pool.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000872-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000872-source">
<pre>
    <span class="ruby-comment cmt"># File lib/sequel_core/database.rb, line 49</span>
49:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">single_threaded?</span>
50:       <span class="ruby-ivar">@single_threaded</span>
51:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000885" class="method-detail">
        <a name="M000885"></a>

        <div class="method-heading">
          <a href="#M000885" class="method-signature">
          <span class="method-name">synchronize</span><span class="method-args">(&amp;block)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Acquires a database connection, yielding it to the passed block.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000885-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000885-source">
<pre>
     <span class="ruby-comment cmt"># File lib/sequel_core/database.rb, line 160</span>
160:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">synchronize</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
161:       <span class="ruby-ivar">@pool</span>.<span class="ruby-identifier">hold</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
162:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000900" class="method-detail">
        <a name="M000900"></a>

        <div class="method-heading">
          <a href="#M000900" class="method-signature">
          <span class="method-name">table_exists?</span><span class="method-args">(name)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns true if the given table exists.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000900-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000900-source">
<pre>
     <span class="ruby-comment cmt"># File lib/sequel_core/database.rb, line 287</span>
287:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">table_exists?</span>(<span class="ruby-identifier">name</span>)
288:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:tables</span>)
289:         <span class="ruby-identifier">tables</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_sym</span>)
290:       <span class="ruby-keyword kw">else</span>
291:         <span class="ruby-identifier">from</span>(<span class="ruby-identifier">name</span>).<span class="ruby-identifier">first</span>
292:         <span class="ruby-keyword kw">true</span>
293:       <span class="ruby-keyword kw">end</span>
294:     <span class="ruby-keyword kw">rescue</span>
295:       <span class="ruby-keyword kw">false</span>
296:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000886" class="method-detail">
        <a name="M000886"></a>

        <div class="method-heading">
          <a href="#M000886" class="method-signature">
          <span class="method-name">test_connection</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns true if there is a database connection
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000886-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000886-source">
<pre>
     <span class="ruby-comment cmt"># File lib/sequel_core/database.rb, line 165</span>
165:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_connection</span>
166:       <span class="ruby-ivar">@pool</span>.<span class="ruby-identifier">hold</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">conn</span><span class="ruby-operator">|</span>}
167:       <span class="ruby-keyword kw">true</span>
168:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000904" class="method-detail">
        <a name="M000904"></a>

        <div class="method-heading">
          <a href="#M000904" class="method-signature">
          <span class="method-name">transaction</span><span class="method-args">() {|conn| ...}</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
A simple implementation of <a href="SQL.html">SQL</a> transactions. Nested
transactions are not supported - calling <a
href="Database.html#M000904">transaction</a> within a <a
href="Database.html#M000904">transaction</a> will reuse the current <a
href="Database.html#M000904">transaction</a>. May be overridden for
databases that support nested transactions.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000904-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000904-source">
<pre>
     <span class="ruby-comment cmt"># File lib/sequel_core/database.rb, line 331</span>
331:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">transaction</span>
332:       <span class="ruby-ivar">@pool</span>.<span class="ruby-identifier">hold</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">conn</span><span class="ruby-operator">|</span>
333:         <span class="ruby-ivar">@transactions</span> <span class="ruby-operator">||=</span> []
334:         <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@transactions</span>.<span class="ruby-identifier">include?</span> <span class="ruby-constant">Thread</span>.<span class="ruby-identifier">current</span>
335:           <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">yield</span>(<span class="ruby-identifier">conn</span>)
336:         <span class="ruby-keyword kw">end</span>
337:         <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">execute</span>(<span class="ruby-constant">SQL_BEGIN</span>)
338:         <span class="ruby-keyword kw">begin</span>
339:           <span class="ruby-ivar">@transactions</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Thread</span>.<span class="ruby-identifier">current</span>
340:           <span class="ruby-identifier">result</span> = <span class="ruby-keyword kw">yield</span>(<span class="ruby-identifier">conn</span>)
341:           <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">execute</span>(<span class="ruby-constant">SQL_COMMIT</span>)
342:           <span class="ruby-identifier">result</span>
343:         <span class="ruby-keyword kw">rescue</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
344:           <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">execute</span>(<span class="ruby-constant">SQL_ROLLBACK</span>)
345:           <span class="ruby-identifier">raise</span> <span class="ruby-identifier">e</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">Error</span><span class="ruby-operator">::</span><span class="ruby-constant">Rollback</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">e</span>
346:         <span class="ruby-keyword kw">ensure</span>
347:           <span class="ruby-ivar">@transactions</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-constant">Thread</span>.<span class="ruby-identifier">current</span>)
348:         <span class="ruby-keyword kw">end</span>
349:       <span class="ruby-keyword kw">end</span>
350:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000873" class="method-detail">
        <a name="M000873"></a>

        <div class="method-heading">
          <a href="#M000873" class="method-signature">
          <span class="method-name">uri</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the URI identifying the database.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000873-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000873-source">
<pre>
    <span class="ruby-comment cmt"># File lib/sequel_core/database.rb, line 54</span>
54:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">uri</span>
55:       <span class="ruby-identifier">uri</span> = <span class="ruby-constant">URI</span><span class="ruby-operator">::</span><span class="ruby-constant">Generic</span>.<span class="ruby-identifier">new</span>(
56:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">adapter_scheme</span>.<span class="ruby-identifier">to_s</span>,
57:         <span class="ruby-keyword kw">nil</span>,
58:         <span class="ruby-ivar">@opts</span>[<span class="ruby-identifier">:host</span>],
59:         <span class="ruby-ivar">@opts</span>[<span class="ruby-identifier">:port</span>],
60:         <span class="ruby-keyword kw">nil</span>,
61:         <span class="ruby-node">&quot;/#{@opts[:database]}&quot;</span>,
62:         <span class="ruby-keyword kw">nil</span>,
63:         <span class="ruby-keyword kw">nil</span>,
64:         <span class="ruby-keyword kw">nil</span>
65:       )
66:       <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">user</span> = <span class="ruby-ivar">@opts</span>[<span class="ruby-identifier">:user</span>]
67:       <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">password</span> = <span class="ruby-ivar">@opts</span>[<span class="ruby-identifier">:password</span>] <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">user</span>
68:       <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">to_s</span>
69:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000874" class="method-detail">
        <a name="M000874"></a>

        <div class="method-heading">
          <span class="method-name">url</span><span class="method-args">()</span>
        </div>
      
        <div class="method-description">
          <p>
Alias for <a href="Database.html#M000873">uri</a>
</p>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>